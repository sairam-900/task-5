<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MILK STORE</title>
  <style>
    :root{
      --brown:#4b3621; --tan:#d2b48c; --cream:#fffaf3; --ink:#2d2319; --muted:#7a5f3a; --ring:rgba(75,54,33,.25);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:"Segoe UI",system-ui,-apple-system,sans-serif;background:var(--cream);color:var(--ink);}
    a{color:inherit;text-decoration:none}
    img{display:block;max-width:100%}
    button{font:inherit}

    /* ===== Header / Navbar ===== */
    header{position:sticky;top:0;z-index:50;background:rgba(255,250,243,.9);backdrop-filter:blur(8px);border-bottom:1px solid #ecdcc7}
    .nav{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:14px 5%}
    .logo{font-family:Georgia,serif;font-weight:800;letter-spacing:3px;color:var(--brown)}
    .nav-right{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
    .home-btn{background:transparent;color:var(--brown);border:2px solid var(--tan);padding:8px 14px;border-radius:999px;font-weight:700;cursor:pointer;transition:.25s}
    .home-btn:hover{background:var(--tan);color:var(--brown)}
    .search-wrap{display:flex;align-items:center;gap:8px;background:#fff;border:1px solid #ead8c1;padding:6px 10px;border-radius:999px}
    #searchBar{border:none;outline:none;min-width:180px}
    .search-btn{background:var(--brown);color:#fff;border:none;padding:8px 12px;border-radius:999px;cursor:pointer}
    .order-btn{background:var(--tan);color:var(--brown);border:none;padding:8px 14px;border-radius:999px;font-weight:700;cursor:pointer}
    .cart-btn{display:flex;align-items:center;gap:6px;background:var(--brown);color:#fff;border:none;padding:8px 12px;border-radius:999px;cursor:pointer}
    .badge{background:#fff;color:var(--brown);padding:2px 8px;border-radius:999px;font-weight:700}
    .toggle{background:#fff;border:1px solid #ead8c1;padding:8px 10px;border-radius:999px;cursor:pointer}

    /* ===== Hero ===== */
    .hero{position:relative;text-align:center;color:#fff;overflow:hidden;background:url('https://images.unsplash.com/photo-1585238341976-18652e72e3e1?q=80&w=1400&auto=format&fit=crop') center/cover no-repeat}
    .hero::after{content:"";position:absolute;inset:0;background:rgba(75,54,33,.45)}
    .hero-inner{position:relative;padding:72px 20px}
    .hero h1{font-family:Georgia,serif;letter-spacing:6px;font-size:clamp(28px,4vw,44px);text-transform:uppercase}
    .hero p{opacity:.95;margin-top:8px;font-size:clamp(14px,2.4vw,18px)}
    .hero-cta{margin-top:16px;display:flex;gap:10px;justify-content:center;flex-wrap:wrap}

    /* ===== Controls ===== */
    .controls{display:flex;justify-content:space-between;align-items:center;gap:12px;padding:16px 5%}
    .tabs{display:flex;gap:8px;flex-wrap:wrap}
    .tab{border:1px solid #ead8c1;background:#fff;color:var(--brown);padding:8px 12px;border-radius:999px;cursor:pointer}
    .tab.active{background:var(--brown);color:#fff}
    .sort{display:flex;align-items:center;gap:8px}
    select{padding:8px 10px;border:1px solid #ead8c1;border-radius:8px;background:#fff}

    /* ===== Product Grid ===== */
    main{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px;padding:10px 5% 40px}
    .card{background:#fff;border:1px solid #f0e5d6;border-radius:14px;overflow:hidden;box-shadow:0 2px 10px rgba(0,0,0,.05);transition:transform .2s;position:relative}
    .card:hover{transform:translateY(-3px)}
    .card img{width:100%;height:200px;object-fit:cover}
    .wish{position:absolute;right:10px;top:10px;background:rgba(255,255,255,.9);border:1px solid #ead8c1;border-radius:999px;padding:6px 9px;cursor:pointer}
    .wish.active{background:var(--brown);color:#fff}
    .info{padding:14px}
    h3{font-size:18px;color:var(--ink);margin-bottom:4px}
    .muted{color:var(--muted);font-size:14px}
    .stars{margin-top:6px;color:#e8b400}
    .price{font-weight:800;color:var(--brown);margin-top:6px}
    .actions{display:flex;gap:8px;margin-top:12px}
    .btn{flex:1;background:var(--tan);color:var(--brown);border:none;padding:10px 12px;border-radius:10px;cursor:pointer;font-weight:700}
    .btn.secondary{background:#fff;border:1px solid #ead8c1}

    /* ===== Toast ===== */
    #toast{position:fixed;left:50%;bottom:20px;transform:translateX(-50%);background:var(--brown);color:#fff;padding:12px 18px;border-radius:10px;opacity:0;transition:opacity .3s;z-index:60}
    #toast.show{opacity:1}

    /* ===== Cart Drawer ===== */
    .drawer{position:fixed;inset:0 0 0 auto;width:min(420px,92vw);background:#fff;border-left:1px solid #ead8c1;box-shadow:-10px 0 20px rgba(0,0,0,.08);transform:translateX(100%);transition:transform .3s;z-index:70;display:flex;flex-direction:column}
    .drawer.open{transform:none}
    .drawer header{position:sticky;top:0;background:#fff;border-bottom:1px solid #f0e5d6}
    .drawer .bar{display:flex;justify-content:space-between;align-items:center;padding:14px 16px}
    .drawer h2{font-size:18px}
    .drawer .close{background:transparent;border:1px solid #ead8c1;padding:6px 10px;border-radius:8px;cursor:pointer}
    .items{padding:10px 14px;overflow:auto;flex:1}
    .item{display:grid;grid-template-columns:64px 1fr auto;gap:10px;align-items:center;padding:10px 0;border-bottom:1px dashed #f0e5d6}
    .qty{display:flex;align-items:center;gap:6px}
    .qty button{width:26px;height:26px;border-radius:6px;border:1px solid #ead8c1;background:#fff;cursor:pointer}
    .drawer footer{border-top:1px solid #f0e5d6;padding:14px 16px}
    .total{display:flex;justify-content:space-between;margin-bottom:10px;font-weight:800}
    .checkout{width:100%;padding:12px;background:var(--brown);color:#fff;border:none;border-radius:10px;cursor:pointer}

    /* ===== Quick View Modal / Checkout Modal ===== */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.35);z-index:80}
    .modal.open{display:flex}
    .sheet{width:min(720px,94vw);background:#fff;border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,.2);overflow:hidden}
    .sheet header{padding:14px 18px;border-bottom:1px solid #f0e5d6}
    .sheet h3{font-size:20px}
    .sheet .body{padding:16px 18px;display:grid;gap:12px}
    .row{display:grid;gap:8px}
    label{font-size:14px;color:var(--muted)}
    input, textarea, select{padding:10px 12px;border:1px solid #ead8c1;border-radius:10px;outline:none}
    input:focus, textarea:focus, select:focus{box-shadow:0 0 0 4px var(--ring)}
    .flex{display:flex;gap:10px;flex-wrap:wrap}
    .sheet footer{padding:14px 18px;border-top:1px solid #f0e5d6;display:flex;gap:10px;justify-content:flex-end}
    .ghost{background:#fff;border:1px solid #ead8c1}

    /* ===== Extras: Testimonials, FAQ, Contact ===== */
    section{padding:28px 5%}
    .section-title{font-family:Georgia,serif;color:var(--brown);letter-spacing:2px;margin-bottom:12px}
    .testimonials{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px}
    .t{background:#fff;border:1px solid #f0e5d6;border-radius:14px;padding:16px;box-shadow:0 2px 10px rgba(0,0,0,.05)}
    .t .who{font-weight:700;margin-top:8px}
    details{background:#fff;border:1px solid #f0e5d6;border-radius:12px;padding:12px}
    details+details{margin-top:10px}
    form.contact{display:grid;gap:10px;max-width:640px}
    .top-link{position:fixed;right:16px;bottom:16px;background:var(--brown);color:#fff;padding:10px 12px;border-radius:999px;display:inline-block}

    /* Responsive */
    @media (max-width:640px){
      .search-wrap{width:100%}
      #searchBar{min-width:0;width:100%}
      .controls{flex-direction:column;align-items:flex-start}
    }
  </style>
</head>
<body>
  <!-- ===== NAVBAR ===== -->
  <header>
    <div class="nav">
      <div class="logo">MILK STORE</div>
      <div class="nav-right">
        <button class="home-btn" id="homeBtn">Home</button>
        <div class="search-wrap">
          <input id="searchBar" type="text" placeholder="Search milk, curd, ice cream..." />
          <button class="search-btn" id="searchBtn">Search</button>
        </div>
        <button class="order-btn" id="orderNow">Order Now</button>
        <button class="cart-btn" id="cartBtn">🛒 <span class="badge" id="cartCount">0</span></button>
        <button class="toggle" id="darkToggle">Dark</button>
      </div>
    </div>
  </header>

  <!-- ===== HERO ===== -->
  <section class="hero" id="home">
    <div class="hero-inner">
      <h1>Fresh Dairy, Better Days</h1>
      <p>Farm-fresh milk, creamy curd, and irresistible ice creams delivered fast.</p>
      <div class="hero-cta">
        <button class="order-btn" id="browseBtn">Browse Products</button>
        <button class="home-btn" id="learnBtn">Why Fresh?</button>
      </div>
    </div>
  </section>

  <!-- ===== CONTROLS ===== -->
  <div class="controls">
    <div class="tabs" id="tabs">
      <button class="tab active" data-cat="all">All</button>
      <button class="tab" data-cat="Milk">Milk</button>
      <button class="tab" data-cat="Curd">Curd</button>
      <button class="tab" data-cat="Ice Cream">Ice Cream</button>
    </div>
    <div class="sort">
      <label for="sortSelect">Sort</label>
      <select id="sortSelect">
        <option value="default">Featured</option>
        <option value="price-asc">Price: Low to High</option>
        <option value="price-desc">Price: High to Low</option>
      </select>
    </div>
  </div>

  <!-- ===== PRODUCTS ===== -->
  <main id="productList"></main>

  <!-- Toast -->
  <div id="toast">Added to cart!</div>

  <!-- ===== CART DRAWER ===== -->
  <aside class="drawer" id="drawer">
    <header>
      <div class="bar">
        <h2>Your Cart</h2>
        <button class="close" id="closeDrawer">Close</button>
      </div>
    </header>
    <div class="items" id="cartItems"></div>
    <footer>
      <div class="total"><span>Total</span><span id="cartTotal">₹0</span></div>
      <button class="checkout" id="checkoutBtn">Proceed to Checkout</button>
    </footer>
  </aside>

  <!-- ===== CHECKOUT MODAL ===== -->
  <div class="modal" id="modal">
    <div class="sheet">
      <header><h3>Checkout</h3></header>
      <div class="body">
        <div class="flex">
          <div class="row" style="flex:1 1 240px">
            <label for="fullName">Full Name</label>
            <input id="fullName" type="text" placeholder="e.g., Rahul Sharma" />
          </div>
          <div class="row" style="flex:1 1 200px">
            <label for="phone">Phone</label>
            <input id="phone" type="tel" placeholder="10-digit number" />
          </div>
        </div>
        <div class="row">
          <label for="address">Delivery Address</label>
          <textarea id="address" rows="3" placeholder="House no, street, city, pincode"></textarea>
        </div>
        <div class="flex">
          <div class="row" style="flex:1 1 200px">
            <label for="payment">Payment Method</label>
            <select id="payment">
              <option>Cash on Delivery</option>
              <option>UPI</option>
              <option>Card</option>
            </select>
          </div>
          <div class="row" style="flex:1 1 200px">
            <label for="slot">Delivery Slot</label>
            <select id="slot">
              <option>Today Evening</option>
              <option>Tomorrow Morning</option>
              <option>Tomorrow Evening</option>
            </select>
          </div>
        </div>
      </div>
      <footer>
        <button class="home-btn ghost" id="cancelModal">Cancel</button>
        <button class="checkout" id="placeOrder">Place Order</button>
      </footer>
    </div>
  </div>

  <!-- ===== TESTIMONIALS ===== -->
  <section>
    <h2 class="section-title">What Customers Say</h2>
    <div class="testimonials">
      <div class="t"><p>“Super fresh milk every morning. The curd is amazing!”</p><div class="who">— Kavya</div></div>
      <div class="t"><p>“Ice cream varieties are🔥 and the delivery is quick.”</p><div class="who">— Arjun</div></div>
      <div class="t"><p>“Love the brown/white design and smooth ordering.”</p><div class="who">— Sneha</div></div>
    </div>
  </section>

  <!-- ===== FAQ ===== -->
  <section>
    <h2 class="section-title">FAQs</h2>
    <details><summary>Is the milk pasteurized?</summary><p>Yes, we deliver pasteurized milk sourced daily from trusted local farms.</p></details>
    <details><summary>Do you offer same-day delivery?</summary><p>Orders before 5 PM qualify for same-day evening delivery in select areas.</p></details>
    <details><summary>What payment methods are accepted?</summary><p>Cash on Delivery, UPI, and major cards.</p></details>
  </section>

  <!-- ===== CONTACT ===== -->
  <section id="contact">
    <h2 class="section-title">Contact Us</h2>
    <form class="contact" onsubmit="event.preventDefault(); alert('Thanks! We will get back to you.'); this.reset();">
      <div class="flex">
        <input type="text" placeholder="Your Name" required style="flex:1 1 240px" />
        <input type="email" placeholder="Email" required style="flex:1 1 240px" />
      </div>
      <textarea rows="4" placeholder="Message"></textarea>
      <button class="order-btn" type="submit" style="width:max(180px, 30%)">Send Message</button>
    </form>
  </section>

  <a class="top-link" href="#home">↑ Top</a>

  <footer style="text-align:center;padding:24px 5%;color:#7a5f3a;border-top:1px solid #ecdcc7">
    <small>© <span id="year"></span> Milk Store. Freshness you can trust.</small>
  </footer>

  <script>
    // ===== Product Data =====
    const products = [
      {id:1,name:"Fresh Cow Milk (1L)",price:60,cat:"Milk",img:"https://thumbs.dreamstime.com/b/milk-cows-emmental-region-switzerland-40969751.jpg",rating:4.7},
      {id:2,name:"Organic Buffalo Milk (1L)",price:70,cat:"Milk",img:"https://5.imimg.com/data5/PM/GP/XT/SELLER-86574144/milk-jpg-1000x1000.jpg",rating:4.5},
      {id:3,name:"Thick Curd (500g)",price:45,cat:"Curd",img:"https://images.herzindagi.info/image/2021/May/curd-amazing-uses.jpg",rating:4.6},
      {id:4,name:"Vanilla Ice Cream (500ml)",price:120,cat:"Ice Cream",img:"https://img.taste.com.au/erX_KgeO/taste/2016/11/vanilla-bean-ice-cream-12608-1.jpeg",rating:4.4},
      {id:5,name:"Chocolate Ice Cream (500ml)",price:130,cat:"Ice Cream",img:"https://www.milkmaid.in/sites/default/files/2020-07/Chocolate-Ice-Cream_0.jpg",rating:4.8},
    ];

    // ===== DOM =====
    const productList=document.getElementById('productList');
    const searchBar=document.getElementById('searchBar');
    const searchBtn=document.getElementById('searchBtn');
    const tabs=document.getElementById('tabs');
    const sortSelect=document.getElementById('sortSelect');
    const drawer=document.getElementById('drawer');
    const cartBtn=document.getElementById('cartBtn');
    const closeDrawer=document.getElementById('closeDrawer');
    const cartItemsEl=document.getElementById('cartItems');
    const cartTotalEl=document.getElementById('cartTotal');
    const cartCountEl=document.getElementById('cartCount');
    const checkoutBtn=document.getElementById('checkoutBtn');
    const modal=document.getElementById('modal');
    const cancelModal=document.getElementById('cancelModal');
    const placeOrder=document.getElementById('placeOrder');
    const browseBtn=document.getElementById('browseBtn');
    const toast=document.getElementById('toast');
    const yearEl=document.getElementById('year');
    const darkToggle=document.getElementById('darkToggle');

    let displayed=[...products];
    const cart=new Map(); // id -> {product, qty}

    const format=n=>`₹${n.toLocaleString('en-IN')}`;
    const showToast=(msg="Added to cart!")=>{toast.textContent=msg;toast.classList.add('show');setTimeout(()=>toast.classList.remove('show'),1400)};

    // ===== Render =====
    function starStr(r){return '★'.repeat(Math.round(r))+'☆'.repeat(5-Math.round(r));}
    function render(list){
      productList.innerHTML='';
      list.forEach(p=>{
        const el=document.createElement('article');
        el.className='card';
        el.innerHTML=`
          <button class="wish" data-wish="${p.id}">♡</button>
          <img loading="lazy" src="${p.img}" alt="${p.name}">
          <div class="info">
            <h3>${p.name}</h3>
            <div class="muted">${p.cat}</div>
            <div class="stars" aria-label="Rating ${p.rating}">${starStr(p.rating)} <span class="muted">(${p.rating})</span></div>
            <div class="price">${format(p.price)}</div>
            <div class="actions">
              <button class="btn" data-id="${p.id}">Add to Cart</button>
              <button class="btn secondary" data-quick="${p.id}">Quick View</button>
            </div>
          </div>`;
        productList.appendChild(el);
      });
    }
    render(displayed);
    yearEl.textContent=new Date().getFullYear();

    // ===== Search / Filter / Sort =====
    function applyFilters(){
      const term=searchBar.value.trim().toLowerCase();
      const active=document.querySelector('.tab.active')?.dataset.cat||'all';
      let list=products.filter(p=>(!term||p.name.toLowerCase().includes(term))&&(active==='all'||p.cat===active));
      const s=sortSelect.value; if(s==='price-asc') list.sort((a,b)=>a.price-b.price); if(s==='price-desc') list.sort((a,b)=>b.price-a.price);
      displayed=list; render(displayed);
    }
    const debounce=(fn,ms)=>{let t;return (...a)=>{clearTimeout(t);t=setTimeout(()=>fn(...a),ms)}};
    searchBar.addEventListener('input',debounce(applyFilters,200));
    searchBtn.addEventListener('click',applyFilters);
    tabs.addEventListener('click',e=>{const t=e.target.closest('.tab');if(!t)return;document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));t.classList.add('active');applyFilters();});
    sortSelect.addEventListener('change',applyFilters);

    document.getElementById('learnBtn')?.addEventListener('click',()=>alert('We source from local farms daily. No preservatives, just pure goodness!'));
    document.getElementById('homeBtn')?.addEventListener('click',()=>window.scrollTo({top:0,behavior:'smooth'}));
    browseBtn?.addEventListener('click',()=>productList.scrollIntoView({behavior:'smooth'}));

    // ===== Wishlist Toggle =====
    document.addEventListener('click',e=>{
      const w=e.target.closest('[data-wish]'); if(!w) return; w.classList.toggle('active'); w.textContent=w.classList.contains('active')?'❤':'♡';
    });

    // ===== Cart =====
    function refreshCart(){
      let total=0; cartItemsEl.innerHTML='';
      cart.forEach(({product,qty})=>{
        total+=product.price*qty;
        const row=document.createElement('div');
        row.className='item';
        row.innerHTML=`
          <img src="${product.img}" alt="${product.name}" style="width:64px;height:64px;object-fit:cover;border-radius:8px;border:1px solid #f0e5d6"/>
          <div>
            <div style="font-weight:700">${product.name}</div>
            <div class="muted">${format(product.price)}</div>
          </div>
          <div class="qty" data-id="${product.id}">
            <button data-act="dec">-</button>
            <span>${qty}</span>
            <button data-act="inc">+</button>
          </div>`;
        cartItemsEl.appendChild(row);
      });
      cartTotalEl.textContent=format(total);
      const count=[...cart.values()].reduce((s,x)=>s+x.qty,0); cartCountEl.textContent=count;
    }
    function addToCart(id,qty=1){
      const product=products.find(p=>p.id===id); if(!product) return;
      const entry=cart.get(id)||{product,qty:0}; entry.qty+=qty; cart.set(id,entry);
      refreshCart(); showToast();
    }
    productList.addEventListener('click',e=>{
      const add=e.target.closest('[data-id]'); const quick=e.target.closest('[data-quick]');
      if(add){ addToCart(+add.dataset.id); }
      if(quick){ const p=products.find(x=>x.id===+quick.dataset.quick); openQuickView(p); }
    });
    cartItemsEl.addEventListener('click',e=>{
      const btn=e.target.closest('button'); if(!btn) return; const wrap=btn.closest('.qty'); const id=+wrap.dataset.id; const entry=cart.get(id); if(!entry) return;
      if(btn.dataset.act==='inc') entry.qty++; if(btn.dataset.act==='dec') entry.qty=Math.max(0,entry.qty-1);
      if(entry.qty===0) cart.delete(id); else cart.set(id,entry); refreshCart();
    });

    const openDrawer=()=>drawer.classList.add('open');
    const closeDrawerFn=()=>drawer.classList.remove('open');
    cartBtn.addEventListener('click',openDrawer);
    document.getElementById('orderNow').addEventListener('click',openDrawer);
    closeDrawer.addEventListener('click',closeDrawerFn);

    // ===== Quick View (reuse modal) =====
    function openQuickView(p){
      if(!p) return;
      modal.classList.add('open');
      const body=modal.querySelector('.body');
      const head=modal.querySelector('header h3');
      head.textContent=p.name;
      body.innerHTML=`
        <div class="flex" style="align-items:center">
          <img src="${p.img}" alt="${p.name}" style="width:180px;height:180px;object-fit:cover;border-radius:12px;border:1px solid #f0e5d6"/>
          <div class="row" style="flex:1 1 260px">
            <div class="price" style="font-size:22px">${format(p.price)}</div>
            <div class="stars">${starStr(p.rating)} <span class="muted">(${p.rating})</span></div>
            <p class="muted">Category: ${p.cat}</p>
            <div class="flex">
              <button class="btn" id="quickAdd">Add to Cart</button>
              <button class="btn secondary" id="quickGoCart">Go to Cart</button>
            </div>
          </div>
        </div>`;
      document.getElementById('quickAdd').onclick=()=>{addToCart(p.id);};
      document.getElementById('quickGoCart').onclick=()=>{addToCart(p.id); modal.classList.remove('open'); openDrawer();};
    }

    // ===== Checkout =====
    checkoutBtn.addEventListener('click',()=>{ if(cart.size===0){showToast('Your cart is empty.');return;} modal.classList.add('open'); modal.querySelector('header h3').textContent='Checkout'; modal.querySelector('.body').innerHTML=document.querySelector('.body').innerHTML;});
    document.getElementById('cancelModal').addEventListener('click',()=> modal.classList.remove('open'));
    document.getElementById('placeOrder').addEventListener('click',()=>{
      const name=document.getElementById('fullName')?.value?.trim();
      const phone=document.getElementById('phone')?.value?.trim();
      const address=document.getElementById('address')?.value?.trim();
      if(!name||!/^[0-9]{10}$/.test(phone)||!address||address.length<8){showToast('Please fill name, valid phone, and address.');return;}
      modal.classList.remove('open'); drawer.classList.remove('open'); cart.clear(); refreshCart(); showToast('Order placed! Thank you.');
    });

    // ===== Dark Toggle =====
    darkToggle.addEventListener('click',()=>{
      document.documentElement.classList.toggle('dark');
      const d=document.documentElement.classList.contains('dark');
      darkToggle.textContent=d?'Light':'Dark';
      document.body.style.background=d?'#1f1a16': 'var(--cream)';
      document.body.style.color=d?'#efe7dd':'var(--ink)';
    });

    // Accessibility + UX
    searchBar.addEventListener('keydown',e=>{if(e.key==='Enter'){applyFilters();}});
    window.addEventListener('keydown',e=>{if(e.key==='Escape'){drawer.classList.remove('open'); modal.classList.remove('open');}});
  </script>
</body>
</html>
